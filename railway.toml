[build]
builder = "dockerfile"

[deploy]
startCommand = "python manage.py migrate && python manage.py runserver 0.0.0.0:$PORT"
healthcheckPath = "/"
healthcheckTimeout = 300
restartPolicyType = "on_failure"

[[services]]
name = "gallery-search-backend"
sourceDir = "."

[[services]]
name = "gallery-search-worker"
sourceDir = "."
startCommand = "celery -A GallerySearch worker --loglevel=info"

[[services]]
name = "redis"
type = "redis"
plan = "starter" 